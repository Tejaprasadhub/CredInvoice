<div class="row app-container">
    <div class="col-md-12 form-details">
        <!-- <p-card styleClass="mb-2">
            <div class="row">
                <strong>Reason for rejecting</strong>
                <small>Unfortunately, we can't proceed with the requested discount/date as it doesn’t align with our terms. Please review and adjust your offer accordingly, and feel free to resend the details for reconsideration.</small>
            </div>
        </p-card> -->
        <!-- <p-card styleClass="mb-2">
            <div class="row">
                <div class="col-md-12 mb-2 text-left">
                    <div class="row">
                        <div class="row col">
                            <div class="col-auto"><strong>Bid Details</strong></div>
                            <div class="col-auto">
                                <span class="status reject">Expired without Bid</span>
                            </div>
                        </div>
                       
                        <div class="col-auto">
                            <p-button  label="Resend for Bidding" icon="pi pi-refresh" />
                        </div>
                    </div>
                </div>                
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Financier</label>
                        <span class="value">777777777</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Interest Rate </label>
                        <span class="value">3.75%</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Cose of Funds</label>
                        <span class="value">75 Lakhs</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Payment Amount</label>
                        <span class="value">75 Lakhs</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Tenure</label>
                        <span class="value">60 Days</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Disbursement Date</label>
                        <span class="value">July 7th 2012</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Repayment Date</label>
                        <span class="value">July 7th 2013</span>
                    </div>
                </div>
            </div>
        </p-card> -->
        <p-card>
            <div class="row align-items-center">
                <div class="col">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <img alt="seller" class="img-fluid" title="Seller" src="/assets/icons/seller_large.png" />
                        </div>
                        <div class="col-auto d-grid">
                            <span class="invoice">{{getSellerName(invoiceDetails)}}</span>
                            <span style="font-size: 14px;">PAN: {{getPanNumber(invoiceDetails)}}</span>
                        </div>
                        <div class="col-auto">
                            <span class="status {{invoiceDetails?.status}}">{{invoiceDetails?.status}}</span>
                        </div>
                    </div>
                </div>
                <div class="col-auto">
                    <!-- <p-button label="Delete" (click)="visible1 = true" class="btn-danger" icon="pi pi-trash" /> -->
                    <!-- <p-button label="Edit Details & Resend" (click)="visible2 = true"  icon="pi pi-send" /> -->
                    <!-- <p-button label="Authorize Payment" (click)="visible3 = true"  icon="pi pi-key" /> -->
                    <!-- <label class="label">Payment Status :  <span class="status sent">Disbursement Pending by Buyer</span></label> -->
                    <label class="label">Payment Status :  <span class="status approve">Disbursed by Buyer</span></label>
                    <!-- <p-button label="Resend for Bidding"  icon="pi pi-refresh" /> -->
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Inovice Number</label>
                        <span class="value">{{invoiceDetails?.invoice_number}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Discout </label>
                        <span class="value">{{invoiceDetails?.discount}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Discounted Amount</label>
                        <span class="value">{{invoiceDetails?.discounted_amount}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Disbursement Date</label>
                        <span class="value">{{invoiceDetails?.disbursement_date}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Fund by</label>
                        <span class="value">{{invoiceDetails?.fund_by}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Inovice Amount</label>
                        <span class="value">{{invoiceDetails?.invoice_amount}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Inovice Date</label>
                        <span class="value">{{invoiceDetails?.invoice_date}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Inovice Due Date</label>
                        <span class="value">{{invoiceDetails?.invoice_due_date}}</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Inovice Pdf's</label>
                        <span class="value">777777777</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="flex flex-column mb-2 text-left">
                        <label class="label" for="username">Goods Description</label>
                        <span class="value">{{invoiceDetails?.goods_description}}</span>
                    </div>
                </div>
            </div>
        </p-card>
        <div class="row mt-3 align-items-center">
            <!-- <div class="col-md-12">
                <span class="mr-4"><strong>Items</strong>(27)</span>  
            </div> -->
                <p-tabView>
                    <!-- <p-tabPanel header="Bids">
                        <p-table [value]="products" [paginator]="true" [rows]="5" styleClass="p-datatable-striped" [first]="first"
                        [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '50rem' }"
                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                        [rowsPerPageOptions]="[5,10, 25, 50]">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Bid Time</th>
                                    <th>Financier</th>
                                    <th>Interest Rate</th>
                                    <th>Cost of Funds</th>
                                    <th style="width: 10rem;">Accept Bid</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-product>
                                <tr>
                                    <td>July 7th 2025</td>
                                    <td>MHS Bank</td>
                                    <td>3.75%</td>
                                    <td>7 Lakhs</td>
                                    <td> <p-button class="btn-success" (click)="visible4 = true"  label="Accept">
                                        <img alt="edit" class="img-fluid" src="/assets/table-icons/percent_white.png" /> 
                                    </p-button>
                                </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </p-tabPanel> -->
                    <p-tabPanel header="Invoice Items(27)">
                        <p-table [value]="invoiceDetails?.items" [paginator]="true" [rows]="5" styleClass="p-datatable-striped" [first]="first"
                [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '50rem' }"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [rowsPerPageOptions]="[5,10, 25, 50]">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>item Number</th>
                            <th>item Name</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Total Amount</th>
                            <th>Actions</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item>
                        <tr>
                            <td>{{item.item_number}}</td>
                            <td>{{item.item_name}}</td>
                            <td>{{item.unit_price}}</td>
                            <td>{{item.quantity}}</td>
                            <td>{{item.total_amount}}</td>
                            <td class="actions">
                                <img alt="trash" class="img-fluid"    title="Delete" src="/assets/table-icons/Trash.png" />
                                <img alt="edit" class="img-fluid" title="Edit" src="/assets/table-icons/Pencil.png" />
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                    </p-tabPanel>
                </p-tabView>
        </div>
    </div>
</div>

<p-dialog header="Add an Item" [modal]="true" [(visible)]="visible" [style]="{ width: '40rem' }">
    <div class="row">
        <div class="col-md-6">
            <div class="flex flex-column mb-2 text-left">
                <label class="label" for="username">Item Number</label>
                <input pInputText id="username" aria-describedby="username-help" />
            </div>
        </div>
        <div class="col-md-6">
            <div class="flex flex-column mb-2 text-left">
                <label class="label" for="username">Item Name</label>
                <input pInputText id="username" aria-describedby="username-help" />
            </div>
        </div>
        <div class="col-md-6">
            <div class="flex flex-column mb-2 text-left">
                <label class="label" for="username">Price </label>
                <input pInputText id="username" aria-describedby="username-help" />
            </div>
        </div>
        <div class="col-md-6">
            <div class="flex flex-column mb-2 text-left">
                <label class="label" for="username">Disbursement Date</label>
                <input pInputText id="username" aria-describedby="username-help" />
            </div>
        </div>  
        <div class="col-md-6">
            <div class="flex flex-column mb-2 text-left">
                <label class="label" for="username">Total Amount</label>
                <input pInputText id="username" aria-describedby="username-help" />
            </div>
        </div>        
    </div>
    <ng-template pTemplate="footer">
        <div class="row">
            <div class="col-3"></div>
            <div class="col-3">
                <p-button  label="Add Item" (onClick)="visible = false" />
            </div>
            <div class="col-3">
                <p-button label="Cancel" class="btn-secondary"  (onClick)="visible = false" />
            </div>
            <div class="col-3"></div>

        </div>

    </ng-template>
</p-dialog>

<p-dialog header="Delete"  [(visible)]="visible1" [modal]="true" [style]="{ width: '25rem' }">
    <span class="">Are you sure you want to delete this sent Invoice? This action can’t be undone.</span>
    <ng-template pTemplate="footer">
        <div class="row">
            <div class="col-3"></div>
            <div class="col-3">
                <p-button label="Delete" class="btn-danger" (click)="visible1 = false" />
            </div>
            <div class="col-3">
                <p-button label="Close" class="btn-secondary" (click)="visible1 = false" />
            </div>
            <div class="col-3"></div>
        </div>
    </ng-template>
</p-dialog>

<p-dialog header="Edit Details and Resend"  [(visible)]="visible2" [modal]="true" [style]="{ width: '35rem' }">
   <div class="row">
    <div class="col-md-6">
        <div class="flex flex-column mb-2 text-left">
            <label for="username">Total Amount</label>
            <input pInputText id="username" aria-describedby="username-help" />
        </div>
    </div>
    <div class="col-md-6">
        <div class="flex flex-column mb-2 text-left">
            <label for="username">Discount Value</label>
            <input pInputText id="username" aria-describedby="username-help" />
        </div>
    </div>
    <div class="col-md-6">
        <div class="flex flex-column mb-2 text-left">
            <label for="username">Amount after Discount</label>
            <input pInputText id="username" aria-describedby="username-help" />
        </div>
    </div>
    <div class="col-md-6">
        <div class="flex flex-column mb-2 text-left">
            <label for="username">Requesting Due Date</label>
            <p-calendar [(ngModel)]="date1" [showIcon]="true" append="body" [showOnFocus]="false"
                inputId="buttondisplay" />
        </div>
    </div>
    <div class="col-md-6">
        <div class="flex flex-column mb-2 text-left">
            <label for="username">Fund By</label>
            <div class="row d-block text-left mt-2">
                <p-chip label="Self" class="active" />
                <p-chip label="Financier" />
            </div>
        </div>
    </div>
</div>
    <ng-template pTemplate="footer">
        <div class="row">
            <div class="col-2"></div>
            <div class="col-4">
                <p-button label="Save & Resend"  (click)="visible2 = false" />
            </div>
            <div class="col-4">
                <p-button label="Cancel" class="btn-secondary" (click)="visible2 = false" />
            </div>
            <div class="col-2"></div>
        </div>
    </ng-template>
</p-dialog>

<p-dialog header="Authorize Payment"  [(visible)]="visible3" [modal]="true" [style]="{ width: '35rem' }">
    <div class="row">
        <div class="col-md-12">
            <small>Authorise by confirming whether the invoice is fund by you or by a financier</small>
        </div>
        <div class="col-md-6">
            <div class="flex flex-column mb-2 text-left">
                <label for="username">Fund By</label>
                <div class="row d-block text-left mt-2">
                    <p-chip label="Self" class="active" />
                    <p-chip label="Financier" />
                </div>
            </div>
        </div>
 </div>
     <ng-template pTemplate="footer">
         <div class="row">
             <div class="col-2"></div>
             <div class="col-4">
                 <p-button label="Authorize"  (click)="visible3 = false" />
             </div>
             <div class="col-4">
                 <p-button label="Cancel" class="btn-secondary" (click)="visible3 = false" />
             </div>
             <div class="col-2"></div>
         </div>
     </ng-template>
 </p-dialog>

 <p-dialog header="Accept Bid"  [(visible)]="visible4" [modal]="true" [style]="{ width: '45rem' }">
    <div class="row">
        <div class="col-md-12 mb-2 text-center">
            <small>Are you sure you want to accept this bid from MHS Bank</small>
        </div>
        <div class="col-md-12 form-details">
            <p-card styleClass="mb-2">
                <div class="row ">           
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Financier</label>
                            <span class="value">777777777</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Interest Rate </label>
                            <span class="value">3.75%</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Cose of Funds</label>
                            <span class="value">75 Lakhs</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Payment Amount</label>
                            <span class="value">75 Lakhs</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Tenure</label>
                            <span class="value">60 Days</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Disbursement Date</label>
                            <span class="value">July 7th 2012</span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="flex flex-column mb-2 text-left">
                            <label class="label" for="username">Repayment Date</label>
                            <span class="value">July 7th 2013</span>
                        </div>
                    </div>
                </div>
            </p-card>
        </div>
 </div>
     <ng-template pTemplate="footer">
         <div class="row">
             <div class="col-2"></div>
             <div class="col-4">
                 <p-button label="Accept Bid"  class="btn-success" (click)="visible4 = false" />
             </div>
             <div class="col-4">
                 <p-button label="Cancel" class="btn-secondary" (click)="visible4 = false" />
             </div>
             <div class="col-2"></div>
         </div>
     </ng-template>
 </p-dialog>